(function(){"use strict";var t={2558:function(t,e,a){var s=a(6848),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("router-view",{on:{"update-cart-qty":t.updateCartQty,"update-qty":t.handleUpdateQty}}),t.showCartButton?e("CartButton",{attrs:{cartQty:t.cartQty}}):t._e()],1)},i=[],o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"cart-btn"}},[e("router-link",{attrs:{to:{name:"cart"},id:"cart-link"}},[e("button",{staticClass:"btn-success"},[t._v("Cart ("+t._s(t.cartQty)+")")])])],1)},n=[],c={props:{cartQty:{type:Number,default:0}}},l=c,d=a(1656),u=(0,d.A)(l,o,n,!1,null,"4a316526",null),m=u.exports,p=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"nav-bar"}},[e("router-link",{attrs:{to:{name:"product"},id:"products-link"}},[e("h1",[t._v("Webstore")])]),e("div",{staticClass:"logo-profile",on:{mouseenter:function(e){t.isHovered=!0},mouseleave:function(e){t.isHovered=!1}}},[e("router-link",{attrs:{to:{name:"profile"},id:"profile-icon"}},[e("svg",{staticClass:"bi bi-person-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"#41B883",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"}})])])],1),t.isNotForInfoProfile?t._e():e("div",{directives:[{name:"show",rawName:"v-show",value:t.isHovered,expression:"isHovered"}],staticClass:"info-profile",on:{mouseenter:function(e){t.isHovered=!0},mouseleave:function(e){t.isHovered=!1}}},[e("div",{staticClass:"logout",on:{click:t.logout}},[e("svg",{staticClass:"bi bi-box-arrow-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"}})]),e("p",[t._v("Logout")])])])],1)},h=[],f=(a(4114),a(4373));const g="http://localhost:8000",v=`${g}/api`,w={login:`${v}/login`,logout:`${v}/logout`,register:`${v}/register`,getUser:`${v}/user/profile`,getAllUsers:`${v}/users`,updateUser:`${v}/user/update/profile`},C={getOrder:`${v}/orders/user`,updateOrder:`${v}/orders/update/user`,deleteOrder:t=>`${v}/orders/delete/user/product/${t}`},y={getAllProduct:`${v}/products/`,getProductById:t=>`${v}/products/${t}`,createProduct:`${v}/products/create`,updateProduct:t=>`${v}/products/update/${t}`,deleteProduct:t=>`${v}/products/delete/${t}`},b={getAllCategory:`${v}/categories/`},P={checkSession:`${v}/check-session`};var _={data(){return{isHovered:!1}},computed:{isNotForInfoProfile(){const t=["login","register"];return t.includes(this.$route.name)}},methods:{infoProfile(){this.isProfileFocus=!0},async logout(){try{await f.A.post(w.logout,{},{withCredentials:!0}),this.$router.push("/login")}catch(t){console.error("Logout failed:",t)}}}},x=_,A=(0,d.A)(x,p,h,!1,null,"e93f8d68",null),k=A.exports,$={components:{Navbar:k,CartButton:m},data(){return{cartQty:0,productQty:0,showCartButton:!0}},async created(){await this.fetchCart(),await this.checkIsNotForCartBtnPage()},watch:{$route:{immediate:!0,handler(){this.checkIsNotForCartBtnPage()}}},methods:{async fetchCart(){const t=await f.A.get(C.getOrder,{withCredentials:!0});let e=t.data.flatMap((t=>t.products));this.cartQty=e.length},updateCartQty(t){this.cartQty=t},handleUpdateQty(t){this.productQty=t},async checkIsNotForCartBtnPage(){try{const t=["login","register","cart"],{data:e}=await f.A.get(P.checkSession,{withCredentials:!0}),a="admin"===e.role;this.showCartButton=!t.includes(this.$route.name)&&!a}catch(t){console.error("Error fetching session:",t),this.showCartButton=!0}}}},U=$,I=(0,d.A)(U,r,i,!1,null,null,null),V=I.exports,q=a(6178),N=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container mt-4",attrs:{id:"page-wrap"}},[e("search-component",{staticClass:"search-product w-50",on:{selectedCriteriaInComp:t.handleSelectedCriteria},model:{value:t.searchInputUser,callback:function(e){t.searchInputUser=e},expression:"searchInputUser"}}),e("div",{staticClass:"row g-4"},t._l(t.paginatedProducts,(function(t){return e("ProductItem",{key:t.id,staticClass:"col-12 col-sm-6 col-md-4 col-lg-4",attrs:{product:t}})})),1),e("div",{staticClass:"d-flex justify-content-center mt-4"},[e("pagination",{staticClass:"pagination",attrs:{records:t.totalRecords,"per-page":t.itemsPerPage,options:t.paginationOptions},on:{paginate:t.handlePageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)])},F=[],S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-item card shadow-sm mb-4",staticStyle:{width:"30%"}},[e("img",{staticClass:"card-img-top rounded-3",staticStyle:{height:"200px","object-fit":"cover"},attrs:{src:`${t.BACKEND_URL}${t.product.imageUrl}`}}),e("div",{staticClass:"card-body d-flex flex-column"},[e("h5",{staticClass:"card-title text-truncate"},[t._v(t._s(t.product.name))]),e("p",{staticClass:"card-text text-success fw-bold"},[t._v(t._s(t._f("currencyFormat")(t.product.price)))]),e("p",{staticClass:"card-text text-muted"},[t._v("Stock: "+t._s(t.product.stock))]),e("div",{staticClass:"d-flex mb-3"},t._l(5,(function(a){return e("span",{key:a,staticClass:"text-warning"},[e("i",{class:a<=t.product.averageRating?"fas fa-star":"far fa-star"})])})),0),e("router-link",{attrs:{to:{name:"product-detail",params:{id:t.product.code}}}},[e("button",{staticClass:"btn btn-success w-100"},[t._v("View Details")])])],1)])},R=[],B={data(){return{BACKEND_URL:g}},props:["product"]},E=B,L=(0,d.A)(E,S,R,!1,null,"58affd9b",null),Q=L.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-wrapper"},[e("div",{staticClass:"input-group"},[e("input",{staticClass:"form-control search-input",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchInput},on:{input:function(e){return t.$emit("input",e.target.value)},wheel:function(t){t.preventDefault()}}}),e("button",{staticClass:"btn dropdown-toggle criteria-button",attrs:{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" "+t._s(t.selectedCriteriaInComp||"Filter By")+" ")]),e("ul",{staticClass:"dropdown-menu"},[t._l(t.searchByCriteriaInComp,(function(a,s){return e("li",{key:s},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.selectCriteria(a)}}},[t._v(" "+t._s(a)+" ")])])})),t._m(0),e("li",[e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.resetCriteria}},[t._v(" Reset Filter ")])])],2)])])},T=[function(){var t=this,e=t._self._c;return e("li",[e("hr",{staticClass:"dropdown-divider"})])}],D={props:{searchInput:{type:String}},data(){return{searchByCriteriaInComp:["nama","rating"],selectedCriteriaInComp:""}},methods:{selectCriteria(t){this.selectedCriteriaInComp=t,this.$emit("selectedCriteriaInComp",this.selectedCriteriaInComp)},resetCriteria(){this.selectedCriteriaInComp="",this.$emit("selectedCriteriaInComp",""),this.$emit("searchInput","")}}},M=D,z=(0,d.A)(M,O,T,!1,null,"ea026bc6",null),H=z.exports,j={components:{ProductItem:Q,searchComponent:H},data(){return{products:[],currentPage:1,itemsPerPage:9,totalRecords:0,paginationOptions:{theme:"bootstrap4",edgeNavigation:!0},selectedCriteria:"",searchInputUser:""}},async created(){const t=await f.A.get(y.getAllProduct);this.products=t.data,this.totalRecords=this.products.length},computed:{paginatedProducts(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredProducts.slice(t,e)},filteredProducts(){let t=this.products;return this.searchInputUser&&this.selectedCriteria&&("nama"===this.selectedCriteria?t=t.filter((t=>t.name.toLowerCase().includes(this.searchInputUser.toLowerCase()))):"rating"===this.selectedCriteria&&(t=t.filter((t=>t.averageRating>=parseFloat(this.searchInputUser))))),""===this.selectedCriteria&&(t=t.filter((t=>t.name.toLowerCase().includes(this.searchInputUser.toLowerCase())))),t},isInputNumber(){return"rating"===this.selectedCriteria}},methods:{handlePageChange(t){this.currentPage=t},handleSelectedCriteria(t){this.selectedCriteria=t}},watch:{filteredProducts:{immediate:!0,handler(t){this.totalRecords=t.length}}}},K=j,Y=(0,d.A)(K,N,F,!1,null,"067fc990",null),Z=Y.exports,W=function(){var t=this,e=t._self._c;return e("div",[e("router-link",{staticClass:"go-back",attrs:{to:{name:"product"}}},[e("svg",{staticClass:"bi bi-arrow-left-circle",staticStyle:{fill:"#41B883"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 16 16"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"}})])]),t.product?e("div",{attrs:{id:"page-wrap"}},[e("div",{attrs:{id:"img-wrap"}},[e("img",{attrs:{src:`${t.BACKEND_URL}${t.product.imageUrl}`,alt:""}})]),e("div",{attrs:{id:"product-details"}},[e("h1",[t._v(t._s(t.product.name))]),e("h3",{attrs:{id:"price"}},[t._v(t._s(t._f("currencyFormat")(t.product.price)))]),e("p",[t._v("Average rating: "+t._s(t.product.averageRating))]),e("p",[t._v("Stock: "+t._s(t.product.stock))]),e("p",[t._v(t._s(t.product.description))]),e("QtySelector",{staticClass:"qty-selector",attrs:{max:t.product.stock},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),e("button",{attrs:{id:"add-to-cart"},on:{click:function(e){return t.addToCart(t.product)}}},[t._v("Add to Cart")])],1)]):e("NotFound")],1)},G=[],J=function(){var t=this,e=t._self._c;return e("h1",[t._v("404: Page not found!")])},X=[],tt={},et=tt,at=(0,d.A)(et,J,X,!1,null,"735a8c14",null),st=at.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group mb-3",staticStyle:{"max-width":"140px"}},[e("div",{staticClass:"input-group-prepend"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.decreaseQty}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control text-center number-input",attrs:{type:"number",min:1,max:t.max},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.increaseQty}},[t._v("+")])])])},it=[],ot={name:"QtySelector",props:{max:Number,value:Number},computed:{quantity:{get(){return this.value},set(t){const e=Math.min(this.max,Math.max(1,t));this.$emit("input",e)}}},methods:{increaseQty(){this.quantity<this.max&&this.quantity++},decreaseQty(){this.quantity>1&&this.quantity--}}},nt=ot,ct=(0,d.A)(nt,rt,it,!1,null,"4b571f03",null),lt=ct.exports,dt={components:{NotFound:st,QtySelector:lt},data(){return{product:{},notif:!1,BACKEND_URL:g}},computed:{quantity:{get(){return this.$store.getters.getItemQuantity(this.product.code)},set(t){this.$store.dispatch("setItemQuantity",{code:this.product.code,quantity:t})}}},methods:{async addToCart(t){try{const e=await f.A.post(C.updateOrder,{product:[{code:t.code,quantity:this.quantity}]},{withCredentials:!0});if(200!==e.status)throw new Error("Failed to add product");this.$swal.fire({title:"added!",text:"Your product has been added to cart.",icon:"success"}),this.notif=!0;const a=await f.A.get(C.getOrder,{withCredentials:!0});console.log(a);let s=Object.assign({},...a.data.map((t=>({cart_items:t.products}))));this.$emit("update-cart-qty",s.cart_items.length)}catch(e){this.$swal.fire({title:"Error!",text:`Failed to add product: ${e.message}`,icon:"error"})}}},async created(){const t=this.$route.params.id,e=await f.A.get(y.getProductById(t));this.product=e.data},watch:{quantity(t){this.$emit("update-item-quantity",{code:this.product.code,quantity:t})}}},ut=dt,mt=(0,d.A)(ut,W,G,!1,null,"399e15a4",null),pt=mt.exports,ht=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"page-wrap"}},[e("h1",[t._v("Shopping Cart")]),t._l(t.cartItems,(function(a){return e("ItemCard",{key:a.id,attrs:{item:a},on:{"remove-item":function(e){return t.removeFromCart(e)}}})})),0===t.cartItems.length?e("h2",{staticClass:"text-center m-5",staticStyle:{opacity:"0.5"}},[t._v("Tidak Ada Produk")]):t._e(),e("h3",{attrs:{id:"total-price"}},[t._v("Total: "+t._s(t._f("currencyFormat")(t.totalPrice?t.totalPrice:"0")))]),e("button",{attrs:{id:"checkout-button"}},[t._v("Checkout")])],2)])},ft=[],gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-container"},[e("img",{staticClass:"product-image",attrs:{src:`${t.BACKEND_URL}${t.item.imageUrl}`,alt:""}}),e("div",{staticClass:"details-wrap"},[e("h3",[t._v(t._s(t.item.name))]),e("p",[t._v(t._s(t._f("currencyFormat")(t.item.price*t.quantity)))]),e("p",[t._v("Stock: "+t._s(t.item.stock))])]),e("QtySelector",{staticClass:"qty-selector",attrs:{max:t.item.stock},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),e("button",{staticClass:"remove-button",on:{click:function(e){return t.$emit("remove-item",t.item.code)}}},[t._v("Remove")])],1)},vt=[],wt={components:{QtySelector:lt},props:["item"],async created(){await this.$store.dispatch("fetchCartQty"),this.isInitialized=!0},data(){return{isInitialized:!1,BACKEND_URL:g}},watch:{quantity:{async handler(t){if(this.isInitialized)try{await f.A.post(C.updateOrder,{product:[{code:this.item.code,quantity:t}]},{withCredentials:!0})}catch(e){console.error("Failed to update cart:",e)}},deep:!0,immediate:!1}},computed:{quantity:{get(){return this.$store.getters.getItemQuantity(this.item.code)},set(t){this.$store.dispatch("setItemQuantity",{code:this.item.code,quantity:t})}}},methods:{updateQuantity(t){this.quantity=t,console.log(t)}}},Ct=wt,yt=(0,d.A)(Ct,gt,vt,!1,null,"26d4da2d",null),bt=yt.exports,Pt={components:{ItemCard:bt},data(){return{cartItems:[]}},methods:{async removeFromCart(t){try{await f.A.delete(C.deleteOrder(t),{withCredentials:!0});const e=this.cartItems.findIndex((e=>e.code===t));-1!==e&&this.cartItems.splice(e,1),this.$store.dispatch("removeItemQuantity",t)}catch(e){console.error("Error removing item from cart:",e)}},async fetchCart(){try{const{data:t}=await f.A.get(C.getOrder,{withCredentials:!0});this.cartItems=t.flatMap((t=>t.products)),this.$emit("update-cart-qty",this.cartItems.length)}catch(t){console.error("Error fetching cart:",t)}}},computed:{totalPrice(){return this.cartItems.reduce(((t,e)=>{const a=this.$store.getters.getItemQuantity(e.code)||1;return t+e.price*a}),0)},cartQty(){return this.cartItems.length}},async created(){await this.fetchCart()},watch:{cartItems:{handler(t){this.$emit("update-cart-qty",t.length)},deep:!0}}},_t=Pt,xt=(0,d.A)(_t,ht,ft,!1,null,"090bf17e",null),At=xt.exports,kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.notif?e("div",{staticClass:"notif",class:t.notifType},[e("i",{staticClass:"icon"}),e("span",[t._v(t._s(t.responseRegis))])]):t._e(),e("div",{staticClass:"register-card"},[e("h3",{staticClass:"text-center"},[t._v("Create Account")]),e("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.registerUser.apply(null,arguments)}}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:t.userValidation()?"":"border-red",attrs:{type:"text",id:"username",placeholder:"Enter your username"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.userValidation],blur:t.resetValidation}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUsernameValidation,expression:"showUsernameValidation"}],staticClass:"form-text",class:t.userValidation()?"text-success":"text-danger",attrs:{id:"basic-addon4"}},[t._v(t._s(t.userValidation()?"user unik":"user sudah ada"))])]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:t.emailValidationResult.isValid?"":"border-red",attrs:{type:"email",id:"email",placeholder:"Enter your email"},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value)},t.emailValidation],blur:t.resetValidation}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmailValidation,expression:"showEmailValidation"}],staticClass:"form-text",class:t.emailValidationResult.isValid?"text-success":"text-danger",attrs:{id:"basic-addon4"}},[t._v(t._s(t.emailValidationResult.message))])]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.validatePassword()?"":"border-red",attrs:{type:"password",id:"password",placeholder:"Enter your password"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.validatePassword],blur:t.resetValidation}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPasswordValidation,expression:"showPasswordValidation"}],staticClass:"form-text",class:t.validatePassword()?"text-success":"text-danger",attrs:{id:"basic-addon4"}},[t._v(t._s(t.validatePassword()?"password valid":"Password must be at least 8 characters long, contain at least 1 uppercase letter, 1 number, and 1 special character."))])]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[t._v("Confirm Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmpass,expression:"confirmpass"}],staticClass:"form-control",class:t.validateConfirmPassword()?"":"border-red",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm your password"},domProps:{value:t.confirmpass},on:{input:[function(e){e.target.composing||(t.confirmpass=e.target.value)},t.validateConfirmPassword],blur:t.resetValidation}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmPasswordValidation,expression:"showConfirmPasswordValidation"}],staticClass:"form-text",class:t.validateConfirmPassword()?"text-success":"text-danger",attrs:{id:"basic-addon4"}},[t._v(t._s(t.validateConfirmPassword()?"Passwords cocok.":"Passwords tidak match."))])]),e("div",{staticClass:"form-check mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.termsAccepted,expression:"termsAccepted"}],staticClass:"form-check-input",class:!t.termsAccepted&&t.termsTriedSubmit?"border-red":"",attrs:{type:"checkbox",id:"termsCheck"},domProps:{checked:Array.isArray(t.termsAccepted)?t._i(t.termsAccepted,null)>-1:t.termsAccepted},on:{change:function(e){var a=t.termsAccepted,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);s.checked?o<0&&(t.termsAccepted=a.concat([i])):o>-1&&(t.termsAccepted=a.slice(0,o).concat(a.slice(o+1)))}else t.termsAccepted=r}}}),t._m(0)]),e("button",{staticClass:"btn btn-custom w-100",attrs:{type:"submit"}},[t._v("Register")])]),e("div",{staticClass:"form-footer"},[e("p",[t._v("Already have an account? "),e("router-link",{attrs:{to:{name:"login"}}},[t._v("Sign in")])],1)])])])},$t=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-check-label",attrs:{for:"termsCheck"}},[t._v(" I agree to the "),e("a",{attrs:{href:"#"}},[t._v("terms and conditions")])])}],Ut={name:"registerForm",data(){return{username:"",email:"",password:"",confirmpass:"",allUsers:[],notif:!1,responseRegis:"",notifType:"",showUsernameValidation:!1,showEmailValidation:!1,emailValidationResult:{isValid:!0,message:""},showPasswordValidation:!1,showConfirmPasswordValidation:!1,termsAccepted:!1,termsTriedSubmit:!1}},created(){this.fetchAllUsers()},methods:{async registerUser(){if(this.termsTriedSubmit=!0,this.termsAccepted)try{const t=await f.A.post(w.register,{username:this.username,email:this.email,password:this.password,confirmpass:this.confirmpass},{withCredentials:!0});201===t.status&&(this.notifType="success",this.responseRegis="Register Successfully",this.showNotif(),setTimeout((()=>{this.$router.replace("/")}),1500)),console.log("User registered:",t.data)}catch(t){this.notifType="error",this.responseRegis=t.response.data.message||"Error occurred",this.showNotif(),console.error("Registration failed:",t)}else setTimeout((()=>{this.termsTriedSubmit=!1}),2e3)},async fetchAllUsers(){const t=await f.A.get(w.getAllUsers);this.allUsers=t.data.users.map((t=>({username:t.username,email:t.email})))},validatePassword(){""!==this.password?this.showPasswordValidation=!0:this.showPasswordValidation=!1;const t=/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return!(!t.test(this.password)&&0!==this.password.length)},validateConfirmPassword(){return""!==this.confirmpass?this.showConfirmPasswordValidation=!0:this.showConfirmPasswordValidation=!1,this.password===this.confirmpass},userValidation(){""!==this.username?this.showUsernameValidation=!0:this.showUsernameValidation=!1;const t=this.allUsers.some((t=>t.username===this.username));return!t},emailValidation(){""!==this.email?this.showEmailValidation=!0:(this.showEmailValidation=!1,this.emailValidationResult={isValid:!0,message:""});const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!t.test(this.email))return void(this.emailValidationResult={isValid:!1,message:"email tidak valid"});const e=this.allUsers.some((t=>t.email===this.email));this.emailValidationResult=e?{isValid:!1,message:"email sudah ada"}:{isValid:!0,message:"email valid"}},resetValidation(){this.showUsernameValidation=!1,this.showConfirmPasswordValidation=!1,this.showPasswordValidation=!1,""===this.email?(this.showEmailValidation=!1,this.emailValidationResult={isValid:!0,message:""}):this.emailValidation()},showNotif(){this.notif=!0,setTimeout((()=>{this.notif=!1}),3e3)}}},It=Ut,Vt=(0,d.A)(It,kt,$t,!1,null,"439fb52b",null),qt=Vt.exports,Nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.notif?e("div",{staticClass:"notif",class:t.notifType},[e("i",{staticClass:"icon"}),e("span",[t._v(t._s(t.responseLogin))])]):t._e(),e("div",{staticClass:"register-card"},[e("h3",{staticClass:"text-center"},[t._v("Login")]),e("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.loginUser.apply(null,arguments)}}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Enter your username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Enter your password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("button",{staticClass:"btn btn-custom w-100",attrs:{type:"submit"}},[t._v("Login")])]),e("div",{staticClass:"form-footer"},[e("p",[t._v("Don't have an account yet? "),e("router-link",{attrs:{to:{name:"register"}}},[t._v("Register")])],1)])])])},Ft=[],St={name:"loginForm",data(){return{username:"",password:"",notif:!1,responseLogin:"",notifType:""}},methods:{async loginUser(){try{const t=await f.A.post(w.login,{username:this.username,password:this.password},{withCredentials:!0});200===t.status&&(this.notifType="success",this.responseLogin="Login successful!",this.showNotif(),setTimeout((()=>{this.$router.push("/admin/dashboard")}),1500))}catch(t){this.notifType="error",this.responseLogin=t.response?.data?.message||"An error occurred!",this.showNotif()}},showNotif(){this.notif=!0,setTimeout((()=>{this.notif=!1}),3e3)}}},Rt=St,Bt=(0,d.A)(Rt,Nt,Ft,!1,null,"8d9dcd64",null),Et=Bt.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[t.notif?e("h4",{staticClass:"notif"},[t._v("update profile successfully")]):t._e(),e("h1",{staticClass:"text-center mb-4"},[t._v("Profile")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.updateProfile.apply(null,arguments)}}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"nama"}},[t._v("Nama")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.nama,expression:"profile.nama"}],staticClass:"form-control",attrs:{type:"text",id:"nama"},domProps:{value:t.profile.nama},on:{input:function(e){e.target.composing||t.$set(t.profile,"nama",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.email,expression:"profile.email"}],staticClass:"form-control",attrs:{type:"email",id:"email"},domProps:{value:t.profile.email},on:{input:function(e){e.target.composing||t.$set(t.profile,"email",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"alamat"}},[t._v("Alamat")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.alamat,expression:"profile.alamat"}],staticClass:"form-control",attrs:{type:"text",id:"alamat"},domProps:{value:t.profile.alamat},on:{input:function(e){e.target.composing||t.$set(t.profile,"alamat",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"telepon"}},[t._v("Nomor Telepon")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.telepon,expression:"profile.telepon"}],staticClass:"form-control",attrs:{type:"tel",id:"telepon"},domProps:{value:t.profile.telepon},on:{input:function(e){e.target.composing||t.$set(t.profile,"telepon",e.target.value)}}})]),e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v("Update Profile")])]),e("button",{staticClass:"btn btn-danger w-100 mt-2",attrs:{type:"button"},on:{click:t.logout}},[t._v("Log Out")])])},Qt=[],Ot={data(){return{profile:{nama:"",email:"",password:"",alamat:"",telepon:""},notif:!1}},async created(){await this.getProfile()},methods:{async updateProfile(){const t=await f.A.post(w.updateUser,{username:this.profile.nama,email:this.profile.email,alamat:this.profile.alamat,telepon:this.profile.telepon},{withCredentials:!0});200===t.status&&(this.notif=!0)},async getProfile(){const{data:t}=await f.A.get(w.getUser,{withCredentials:!0}),e=t.user;this.profile.nama=e.username,this.profile.email=e.email,this.profile.alamat=e.alamat,this.profile.telepon=e.telepon},async logout(){try{await f.A.post(w.logout,{},{withCredentials:!0}),this.$router.push("/login")}catch(t){console.error("Logout failed:",t)}}}},Tt=Ot,Dt=(0,d.A)(Tt,Lt,Qt,!1,null,"37a6bc4a",null),Mt=Dt.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("h1",[t._v("Produk Saya")]),e("router-link",{attrs:{to:{name:"create-product"}}},[e("button",{staticClass:"create-button"},[t._v("Create Product")])])],1),e("div",{staticClass:"mb-4"},[e("searchComponent",{on:{selectedCriteriaInComp:t.handleSelectedCriteria},model:{value:t.searchInputUser,callback:function(e){t.searchInputUser=e},expression:"searchInputUser"}})],1),e("table",[t._m(0),e("tbody",t._l(t.paginatedProducts,(function(a){return e("ItemEdit",{key:a.id,attrs:{product:a},on:{"product-deleted":t.removeProduct}})})),1)]),e("pagination",{staticClass:"pagination",attrs:{records:t.totalRecords,"per-page":t.itemsPerPage,options:t.paginationOptions},on:{paginate:t.handlePageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},Ht=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Price")]),e("th",[t._v("Stock")]),e("th",[t._v("Action")])])])}],jt=function(){var t=this,e=t._self._c;return e("tr",[e("td",[e("div",{staticClass:"product-info"},[e("img",{attrs:{src:`${t.BACKEND_URL}${t.product.imageUrl}`,alt:"",width:"100"}}),e("h5",{staticClass:"product-name"},[t._v(t._s(t.product.name))])])]),e("td",[e("p",{staticClass:"product-price"},[t._v(t._s(t._f("currencyFormat")(t.product.price)))])]),e("td",[e("p",[t._v(t._s(t.product.stock))])]),e("td",[e("div",{staticClass:"button-action"},[e("router-link",{attrs:{to:{name:"update-product",params:{id:t.product.code}}}},[e("button",{staticClass:"action"},[e("svg",{staticClass:"bi bi-pencil-square svg-icon edit",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"blue",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"}})])])]),e("button",{staticClass:"action",on:{click:t.deleteBtn}},[e("svg",{staticClass:"bi bi-trash svg-icon delete",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}}),e("path",{attrs:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}})])])],1)])])},Kt=[],Yt={data(){return{BACKEND_URL:g}},props:["product"],methods:{deleteBtn(){this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{if(t.isConfirmed){this.$swal.fire({title:"Deleting...",text:"Please wait while we delete the product",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{this.$swal.showLoading()}});try{const t=await f.A.delete(y.deleteProduct(this.product.code));if(204!==t.status)throw new Error("Failed to delete product");this.$swal.fire({title:"Deleted!",text:"Your product has been deleted.",icon:"success"}),this.$emit("product-deleted",this.product.code)}catch(e){this.$swal.fire({title:"Error!",text:`Failed to delete product: ${e.message}`,icon:"error"})}}}))}}},Zt=Yt,Wt=(0,d.A)(Zt,jt,Kt,!1,null,"0ce24224",null),Gt=Wt.exports,Jt={components:{ItemEdit:Gt,SearchComponent:H},data(){return{products:[],currentPage:1,itemsPerPage:10,totalRecords:0,paginationOptions:{theme:"bootstrap4",edgeNavigation:!0},selectedCriteria:"",searchInputUser:""}},async created(){const t=await f.A.get(y.getAllProduct);this.products=t.data,this.totalRecords=this.products.length},computed:{filteredProducts(){let t=this.products;return this.searchInputUser&&this.selectedCriteria&&("nama"===this.selectedCriteria?t=t.filter((t=>t.name.toLowerCase().includes(this.searchInputUser.toLowerCase()))):"rating"===this.selectedCriteria&&(t=t.filter((t=>t.averageRating>=parseFloat(this.searchInputUser))))),""===this.selectedCriteria&&(t=t.filter((t=>t.name.toLowerCase().includes(this.searchInputUser.toLowerCase())))),t},paginatedProducts(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredProducts.slice(t,e)}},methods:{removeProduct(t){this.products=this.products.filter((e=>e.code!==t))},handlePageChange(t){this.currentPage=t},handleSelectedCriteria(t){this.selectedCriteria=t}},watch:{filteredProducts:{immediate:!0,handler(t){this.totalRecords=t.length}}}},Xt=Jt,te=(0,d.A)(Xt,zt,Ht,!1,null,"18749548",null),ee=te.exports,ae=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[e("h1",{staticClass:"text-center mb-4"},[t._v("Update Item")]),t.Product.code&&t.categories.length?e("ProductForm",{attrs:{isUpdate:!0,initialProduct:t.Product,categories:t.categories},on:{submit:t.updateProductFromChild}}):t._e()],1)},se=[],re=function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(e){return e.preventDefault(),t.submitProduct.apply(null,arguments)}}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"code"}},[t._v("Code")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.code,expression:"Product.code"}],staticClass:"form-control",attrs:{type:"text",name:"code",id:"code",disabled:t.isUpdate,required:!t.isUpdate},domProps:{value:t.Product.code},on:{input:function(e){e.target.composing||t.$set(t.Product,"code",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.nama,expression:"Product.nama"}],staticClass:"form-control",attrs:{type:"text",name:"nama",id:"nama",required:""},domProps:{value:t.Product.nama},on:{input:function(e){e.target.composing||t.$set(t.Product,"nama",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"category"}},[t._v("Category")]),e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" "+t._s(t.Product.selectedCategory?t.Product.selectedCategory.name:"Select a Category")+" ")]),e("ul",{staticClass:"dropdown-menu"},t._l(t.categories,(function(a){return e("li",{key:a.id},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.selectCategory(a)}}},[t._v(t._s(a.name))])])})),0)])]),e("div",{staticClass:"mb-3"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.harga,expression:"Product.harga"}],staticClass:"form-control",attrs:{type:"number",name:"harga",id:"harga",required:""},domProps:{value:t.Product.harga},on:{wheel:function(t){t.preventDefault()},input:function(e){e.target.composing||t.$set(t.Product,"harga",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.stok,expression:"Product.stok"}],staticClass:"form-control",attrs:{type:"number",name:"stok",id:"stok",required:""},domProps:{value:t.Product.stok},on:{wheel:function(t){t.preventDefault()},input:function(e){e.target.composing||t.$set(t.Product,"stok",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[t._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.berat,expression:"Product.berat"}],staticClass:"form-control",attrs:{type:"text",name:"berat",id:"berat",required:""},domProps:{value:t.Product.berat},on:{input:function(e){e.target.composing||t.$set(t.Product,"berat",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"dimensi"}},[t._v("Dimensi")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.dimensi,expression:"Product.dimensi"}],staticClass:"form-control",attrs:{type:"text",name:"dimensi",id:"dimensi"},domProps:{value:t.Product.dimensi},on:{input:function(e){e.target.composing||t.$set(t.Product,"dimensi",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[t._m(4),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Product.deskripsi,expression:"Product.deskripsi"}],staticClass:"form-control",attrs:{name:"deskripsi",id:"deskripsi",rows:"5",required:""},domProps:{value:t.Product.deskripsi},on:{input:function(e){e.target.composing||t.$set(t.Product,"deskripsi",e.target.value)}}})]),e("div",{staticClass:"mb-3"},[t._m(5),e("div",{staticClass:"upload-img"},[t.Product.imgPreviewUrl||t.Product.imgUrl?e("img",{staticClass:"img-thumbnail",attrs:{src:t.Product.imgPreviewUrl||`${t.BACKEND_URL}${t.Product.imgUrl}`,alt:""}}):t._e(),t.Product.imgPreviewUrl||t.Product.imgUrl?t._e():e("div",{staticClass:"file-input-box"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"image-input"},on:{change:t.onFileChange}}),e("div",{staticClass:"icon-placeholder"},[e("svg",{staticClass:"bi bi-upload",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"}}),e("path",{attrs:{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"}})])])]),t.Product.imgPreviewUrl||t.Product.imgUrl?e("div",{staticClass:"delete-img",on:{click:t.deleteImage}},[e("svg",{staticClass:"bi bi-trash",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}}),e("path",{attrs:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}})])]):t._e()])]),e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v(t._s(t.isUpdate?"Update":"Create")+" Product")])])},ie=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"nama"}},[t._v("Nama "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"harga"}},[t._v("Harga "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"stok"}},[t._v("Stok "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"berat"}},[t._v("Berat "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"deskripsi"}},[t._v("Deskripsi "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"form-label",attrs:{for:"image"}},[t._v("Foto Produk "),e("span",{staticStyle:{color:"red"}},[t._v("*")])])}],oe=(a(4603),a(7566),a(8721),{props:{isUpdate:{type:Boolean,default:!1},initialProduct:{type:Object,default:()=>({})},categories:{type:Array,default:()=>[]}},data(){return{Product:{...this.initialProduct},BACKEND_URL:g}},methods:{submitProduct(){this.$emit("submit",{...this.Product})},selectCategory(t){this.Product.selectedCategory=t},onFileChange(t){const e=t.target.files[0];e&&(this.Product.imgPreviewUrl=URL.createObjectURL(e),this.Product.imgUrl=e)},deleteImage(){this.Product.imgPreviewUrl="",this.Product.imgUrl=""}},watch:{initialProduct:{immediate:!0,deep:!0,handler(t){this.Product={...t},console.log(t)}}}}),ne=oe,ce=(0,d.A)(ne,re,ie,!1,null,"4bccc8f3",null),le=ce.exports,de={components:{ProductForm:le},data(){return{Product:{code:"",nama:"",selectedCategory:null,harga:"",deskripsi:"",stok:"",berat:"",dimensi:"",imgUrl:"",imgPreviewUrl:""},categories:[],notif:!1}},async created(){await this.getCategory(),await this.getProduct()},methods:{updateProductFromChild(t){this.Product=t,this.updateProduct()},async updateProduct(){const t=this.$route.params.id,e=new FormData;e.append("code",this.Product.code),e.append("name",this.Product.nama),e.append("categoryId",this.Product.selectedCategory.id),e.append("price",this.Product.harga),e.append("description",this.Product.deskripsi),e.append("stock",this.Product.stok),e.append("weight",this.Product.berat),e.append("dimensions",this.Product.dimensi),this.Product.imgUrl&&e.append("image",this.Product.imgUrl);try{const a=await f.A.put(y.updateProduct(t),e,{headers:{"Content-Type":"multipart/form-data"}});if(200!==a.status)throw new Error("Failed to update product");this.$swal.fire({title:"updated!",text:"Your product has been updated.",icon:"success"}).then((()=>{this.getProduct(),this.$router.push("/admin/dashboard")}))}catch(a){this.$swal.fire({title:"Error!",text:`Failed to update product: ${a.message}`,icon:"error"}),console.error("Error updating product:",a)}},async getCategory(){const{data:t}=await f.A.get(b.getAllCategory);this.categories=t.map((t=>({id:t.id,name:t.name}))),console.log(this.categories)},async getProduct(){const t=this.$route.params.id,{data:e}=await f.A.get(y.getProductById(t));console.log(e),this.Product.code=e.code,this.Product.nama=e.name,this.Product.harga=e.price,this.Product.deskripsi=e.description,this.Product.stok=e.stock,this.Product.berat=e.weight,this.Product.dimensi=e.dimensions,this.Product.imgUrl=e.imageUrl;const a=this.categories.find((t=>t.id===e.category_id));a&&(this.Product.selectedCategory=a,console.log(this.Product.selectedCategory.id))}}},ue=de,me=(0,d.A)(ue,ae,se,!1,null,"fdb16e4a",null),pe=me.exports,he=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[e("h1",{staticClass:"text-center mb-4"},[t._v("Create Item")]),e("ProductForm",{attrs:{isUpdate:!1,initialProduct:t.Product,categories:t.categories},on:{submit:t.updateProductFromChild}})],1)},fe=[],ge={components:{ProductForm:le},data(){return{Product:{code:"",nama:"",selectedCategory:null,harga:"",deskripsi:"",stok:"",berat:"",dimensi:"",imgUrl:"",imgPreviewUrl:""},categories:[],notif:!1}},async created(){await this.getCategory()},methods:{updateProductFromChild(t){this.Product=t,this.createProduct()},async createProduct(){const t=new FormData;t.append("code",this.Product.code),t.append("name",this.Product.nama),t.append("categoryId",this.Product.selectedCategory.id),t.append("price",this.Product.harga),t.append("description",this.Product.deskripsi),t.append("stock",this.Product.stok),t.append("weight",this.Product.berat),t.append("dimensions",this.Product.dimensi),this.Product.imgUrl&&t.append("image",this.Product.imgUrl);try{const e=await f.A.post(y.createProduct,t,{headers:{"Content-Type":"multipart/form-data"}});if(201!==e.status)throw new Error("Failed to create product");this.$swal.fire({title:"Created!",text:"Your product has been created.",icon:"success"}),setTimeout((()=>{this.$router.push("/admin/dashboard")}),2e3)}catch(e){this.$swal.fire({title:"Error!",text:`Failed to create product: ${e.message}`,icon:"error"}),console.error("Error creating product:",e)}},async getCategory(){const{data:t}=await f.A.get(b.getAllCategory);this.categories=t.map((t=>({id:t.id,name:t.name})))}}},ve=ge,we=(0,d.A)(ve,he,fe,!1,null,"77765072",null),Ce=we.exports;s.Ay.use(q.Ay);const ye=async(t,e,a)=>{try{const{data:e}=await f.A.get(P.checkSession,{withCredentials:!0});if(t.meta.userRole=e.role,console.log(e.role),e.authenticated)return"/login"===t.path||"/register"===t.path?a("/"):a();if("/login"!==t.path&&"/register"!==t.path)return a("/login");a()}catch(s){console.error("Failed to check session:",s),a("/login")}},be=t=>(e,a,s)=>{const r=e.meta.userRole,i=e.meta.requiresAuth;if(i&&r!==t)return s({path:"/",replace:!0});s()},Pe=[{path:"/",name:"product",component:Z},{path:"/product/:id",name:"product-detail",component:pt},{path:"/cart",name:"cart",component:At},{path:"/profile",name:"profile",component:Mt},{path:"/register",name:"register",component:qt},{path:"/login",name:"login",component:Et},{path:"/admin/dashboard",name:"admin-dashboard",component:ee,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/products/create",name:"create-product",component:Ce,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/products/update/:id",name:"update-product",component:pe,meta:{requiresAuth:!0,role:"admin"}},{path:"*",component:st}],_e=new q.Ay({mode:"history",base:"/",routes:Pe});_e.beforeEach((async(t,e,a)=>{await ye(t,e,a),t.meta.requiresAuth?be(t.meta.role)(t,e,a):a()}));var xe=_e,Ae=a(3518);s.Ay.use(Ae.Ay);var ke=new Ae.Ay.Store({state:{quantities:{}},mutations:{initializeItemQuantity(t,e){t.quantities[e]||s.Ay.set(t.quantities,e,1)},updateItemQuantity(t,{code:e,quantity:a}){s.Ay.set(t.quantities,e,a)},removeItemQuantity(t,e){s.Ay.delete(t.quantities,e)}},actions:{async fetchCartQty({commit:t}){try{const{data:e}=await f.A.get(C.getOrder,{withCredentials:!0}),a=e.flatMap((t=>t.cart_items));a.forEach((e=>{t("updateItemQuantity",{code:e.code,quantity:e.quantity})}))}catch(e){console.error("Error fetching cart items:",e)}},setItemQuantity({commit:t},e){t("initializeItemQuantity",e.code),t("updateItemQuantity",e)},removeItemQuantity({commit:t},e){t("removeItemQuantity",e)}},getters:{getItemQuantity:t=>e=>void 0!==t.quantities[e]?t.quantities[e]:1}}),$e=a(5329),Ue=a(2139),Ie=a.n(Ue);s.Ay.use($e.A),s.Ay.config.productionTip=!1,s.Ay.component("pagination",Ie()),s.Ay.filter("currencyFormat",(function(t){return t?"Rp"+Number(t).toLocaleString("id-ID",{minimumFractionDigits:0}):""})),new s.Ay({store:ke,router:xe,render:t=>t(V)}).$mount("#app")}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var o=1/0;for(d=0;d<t.length;d++){s=t[d][0],r=t[d][1],i=t[d][2];for(var n=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,o=s[0],n=s[1],c=s[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(c)var d=c(a)}for(e&&e(s);l<o.length;l++)i=o[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunkvuestore_client"]=self["webpackChunkvuestore_client"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(2558)}));s=a.O(s)})();
//# sourceMappingURL=app.fe4eddb2.js.map